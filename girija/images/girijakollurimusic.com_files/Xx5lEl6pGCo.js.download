if (self.CavalryLogger) { CavalryLogger.start_js(["X4ml+lw"]); }

__d("XAddToHomescreenRegistrationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/a2hs/state/",{})}),null);
__d("AddToHomeScreenRegistration",["MRequest","PushRegistration","Run","ServiceWorkerRegistration","XAddToHomescreenRegistrationController"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var d=c("XAddToHomescreenRegistrationController").getURIBuilder().getURI();new(c("MRequest"))(d).setMethod("POST").addData({event:a,prompt_type:b}).setIgnoreErrors(!0).send()}function a(a){d("Run").onAfterLoad(function(){c("ServiceWorkerRegistration").registerWorkerIfUnregistered(a)})}function i(){if(c("PushRegistration").pushPermissionIsOn())return;c("ServiceWorkerRegistration").unregisterControllingWorker()}function b(a,b){h(a,b),a==="prompt_rejected"&&i()}g.register=a;g.unregister=i;g.onInstallBanner=b}),98);
__d("MNuxWizardA2HS",["AddToHomeScreenRegistration","Event","NUXWizardTypedLogger","ge","promiseDone"],(function(a,b,c,d,e,f,g){var h="nux-nav-button",i="a2hsbutton";function a(a){var b=c("ge")(i),e=c("Event").listen(b,"click",function(){a.prompt(),j("show_browser_dialog"),a.userChoice&&c("promiseDone")(a.userChoice,function(a){a.outcome==="accepted"?j("allow","conversion"):(d("AddToHomeScreenRegistration").unregister(),j("deny"));a=c("ge")(h);a&&a.click()}),e.remove()})}function j(a,b){b===void 0&&(b="step"),new(c("NUXWizardTypedLogger"))().setEvent(a).setEventType(b).setPlatform("mobile").setStep("homescreen_shortcut").log()}g.listenForCTAClick=a;g._logEvent=j}),98);
__d("XAddToHomescreenPreauthDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/a2hs/preauth/",{})}),null);
__d("AddToHomeScreenListener",["AddToHomeScreenRegistration","Bootloader","MNuxWizardA2HS","MRequest","XAddToHomescreenPreauthDialogController","promiseDone","regeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=null;a=function(a,b,c){c===void 0&&(c=!1),i(a,b,!1,null,c)};function i(a,b,e,f,g){g===void 0&&(g=!1);if(h&&f){f();return}window.addEventListener("beforeinstallprompt",function(e){if(!e.userChoice)return;h=e;if(g)e.preventDefault(),d("MNuxWizardA2HS").listenForCTAClick(e);else if(b){e.preventDefault();var i=c("XAddToHomescreenPreauthDialogController").getURIBuilder().getURI();new(c("MRequest"))(i).send()}else a?(e.preventDefault(),c("Bootloader").loadModules(["FullScreenEmptyOverlay"],function(a){c("promiseDone")(j(a))},"AddToHomeScreenListener")):c("promiseDone")(j());f&&f()})}var j=function(a){var c,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:if(h){f.next=2;break}return f.abrupt("return");case 2:a&&a.show();c=1;d("AddToHomeScreenRegistration").onInstallBanner("prompt_shown",c);h.prompt();f.prev=6;f.next=9;return b("regeneratorRuntime").awrap(h.userChoice);case 9:e=f.sent;e&&(e.outcome==="dismissed"?d("AddToHomeScreenRegistration").onInstallBanner("prompt_rejected",c):d("AddToHomeScreenRegistration").onInstallBanner("prompt_accepted",c));f.next=16;break;case 13:f.prev=13,f.t0=f["catch"](6),d("AddToHomeScreenRegistration").onInstallBanner("prompt_error",c);case 16:f.prev=16;a&&a.destroy();return f.finish(16);case 19:case"end":return f.stop()}},null,this,[[6,13,16,19]])};g.listen=a;g.listenDeferred=i;g.showDeferredPrompt=j}),98);